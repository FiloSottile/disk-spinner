# disk-spinner - a stress-test tool for spinning rust HDDs

If you set up a new mechanical disk that you take fresh out of the package and slot it into your NAS, do you ask yourself whether the data on it will be safe? I do, and so do a bunch of folks who run machines with lots of drives!

There's a pretty decent procedure that I'd been using to burn-in my HDDs, taken from [this forum thread](https://www.truenas.com/community/resources/hard-drive-burn-in-testing.92/); this is fine but these days, HDDs in excess of 18TiB exist, and on those badblocks runs into a limitation of its block offset representation.

Hence, this tool: disk-spinner.

## What does this do?

It destructively writes blocks of random data with a checksum to an entire disk device (or, optionally, just a partition; but you'll probably want the whole drive), then verifies that the data matches the checksum.

If any data could not be read exactly as written, it informs you in big letters. That means your disk is bad & you should make use of your vendor's RMA policy. Doesn't it feel great to not run into problems?

But note: **THE VERIFICATION BIT IS NOT IMPLEMENTED YET**.

## The name

This tool is for spinning disks; it's also a play on the German word "Spinner" (a goofball), referring to me - a person goofy about disks.

## Why?

First of all, [the 18TiB issue](https://www.reddit.com/r/DataHoarder/comments/fbst8m/alternative_to_badblocks/). I'd been using zfs (write random data, `zpool scrub`) to validate the data in the meantime; but unfortunately, that reserves a good chunk of space on the volume which will remain untested. So, here we are.

I also wanted to make something that does a bunch of error-checking before it'll let me super-destructively overwrite data on a drive: This tool does check that it's running on a bare disk drive with a rotational medium. (TODO: check that the disk has no partition table - we really only want to run on fresh disks)

Also, performance is not bad at all: The random data that is getting written is generated by as many worker threads as the machine can spare, it regularly writes at speeds of 250MiB/s, which should be plenty for a spinning rust HDD.
